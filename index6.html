<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>GitHub APIを利用したサンプル</title>
  </head>
  <body>
    <h1>JavaScript関連のリポジトリ数 by GitHub</h1>

    <button id="btn">更新</button>
    <div id="result"></div>

    <script>
      const url = "https://api.github.com/search/repositories?q=javascript";
      const btn = document.getElementById("btn");
      const result = document.getElementById("result");

      const createResult = (item) => {
        const h2 = document.createElement("h2");

        h2.textContent = "リポジトリの総数は、" + item.total_count + "件です！";

        result.appendChild(h2);
      };

      btn.addEventListener("click", () => {
        result.innerHTML = ""; // 結果表示部分をリセット

        fetch(url)
          .then((data) => data.json())
          .then((data) => createResult(data));
      });

      //   const li = document.createElement("li");
      //   const a = document.createElement("a");

      //   a.href = item.url;
      //   li.textContent = item.title;

      //   a.appendChild(li);
      //   list.appendChild(a);
      // };

      // btn.addEventListener("click", () => {
      //   list.innerHTML = "";

      //   fetch(url)
      //     .then((data) => data.json())
      //     .then((data) => {
      //       data.forEach((item) => createList(item));
      //     });
      // });
    </script>
  </body>
</html>
